<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修钉钉app扫码二维码登录OA' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>钉钉app扫码二维码登录OA</center></div><div class='banquan'>原文出处:本文由博客园博主一个猎手提供。<br/>
原文连接:https://www.cnblogs.com/zhou-tt/p/11417472.html</div><br>
    <p>钉钉扫码二维码登录OA系统</p>
<p>1.创建企业内部微应用</p>
<p>2.二维码前端实现及code获取</p>
<p>　1).在页面中先引入如下js</p>
<p>　　&lt;script src=<span class="hljs-string">"https://g.alicdn.com/dingding/dinglogin/0.0.5/ddLogin.js"&gt;<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/<span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script<span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag">　2).<span data-spm-anchor-id="0.0.0.i10.4dc3126d97HkJ1">在需要使用钉钉登录的地方实例以下JS对象</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span data-spm-anchor-id="0.0.0.i10.4dc3126d97HkJ1">　/* * 解释一下goto参数，参考以下例子： </span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span data-spm-anchor-id="0.0.0.i10.4dc3126d97HkJ1">　* var url = encodeURIComponent('http://localhost.me/index.php?test=1&amp;aa=2'); </span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span data-spm-anchor-id="0.0.0.i10.4dc3126d97HkJ1">　* var goto = encodeURIComponent('https://oapi.dingtalk.com/connect/oauth2/sns_authorize？　</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span data-spm-anchor-id="0.0.0.i10.4dc3126d97HkJ1">　*appid=appid&amp;response_type=code&amp;scope=snsapi_login&amp;state=STATE&amp;redirect_uri='+url) </span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span data-spm-anchor-id="0.0.0.i10.4dc3126d97HkJ1">　　*/</span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag">　　<span class="hljs-keyword">var obj = DDLogin({ </span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword">　　　　<span class="hljs-attr">id:<span class="hljs-string">"login_container",<span class="hljs-comment">//这里需要你在自己的页面定义一个HTML标签并设置id，例如&lt;div id="login_container"&gt;&lt;/div&gt;或&lt;span id="login_container"&gt;&lt;/span&gt; </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment">　　　　goto: <span class="hljs-string">"", <span class="hljs-comment">//请参考注释里的方式 </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment">　　　　style: <span class="hljs-string">"border:none;", </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string">　　　　<span class="hljs-attr">width : <span class="hljs-string">"365", </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string">　　　　<span class="hljs-attr">height: <span class="hljs-string">"400" });　　//width和height不代表二维码的大小，二维码的大小是固定的</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string">　　3).判断是否来自钉钉扫码事件，获取loginTmoCode跳转到2)中goto的redirect_uri,并且会向redirect_uri后最近code和state两个参数</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword">　　var handleMessage = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function<span class="hljs-function"> (<span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event<span class="hljs-function">) { </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword">　　　　var origin = event.origin; <span class="hljs-built_in">console.log(<span class="hljs-string">"origin", event.origin); </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword">　　　　if( origin == <span class="hljs-string">"https://login.dingtalk.com" ) {</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment">//判断是否来自ddLogin扫码事件。</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword">　　　　　　var loginTmpCode = event.data; <span class="hljs-comment">//拿到loginTmpCode后就可以在这里构造跳转链接进行跳转了 </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in">　　　　　　console.log(<span class="hljs-string">"loginTmpCode", loginTmpCode); </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string">　　　　　}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string">　　 }; </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword">　　if (<span class="hljs-keyword">typeof <span class="hljs-built_in">window.addEventListener != <span class="hljs-string">'undefined') { </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in">　　　　window.addEventListener(<span class="hljs-string">'message', handleMessage, <span class="hljs-literal">false);</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-literal"> 　　} <span class="hljs-keyword">else <span class="hljs-keyword">if (<span class="hljs-keyword">typeof <span class="hljs-built_in">window.attachEvent != <span class="hljs-string">'undefined') { </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-literal"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string">　　　　<span class="hljs-built_in">window.attachEvent(<span class="hljs-string">'onmessage', handleMessage);</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-literal"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string">　　 }</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-literal"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string">3.通过临时授权码（code）获取授权的个人信息</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-literal"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string">　　DefaultDingTalkClient client = <span class="hljs-keyword">new DefaultDingTalkClient(<span class="hljs-string">"https://oapi.dingtalk.com/sns/getuserinfo_bycode"); </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-literal"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string">　　OapiSnsGetuserinfoBycodeRequest req = <span class="hljs-keyword">new OapiSnsGetuserinfoBycodeRequest(); </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-literal"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword">　　req.setTmpAuthCode(<span class="hljs-string">"4a2c5695b78738d495f47b5fee9160cd"); </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-literal"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string">　　OapiSnsGetuserinfoBycodeResponse response = client.execute(req,<span class="hljs-string">"yourAppId",<span class="hljs-string">"yourAppSecret");　　//yourAppId和yourAppSecret是创建扫码授权的appid和appsecret</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-literal"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string">　　返回结果{ </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-literal"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string">　　　　<span class="hljs-attr">"errcode": <span class="hljs-number">0, </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-literal"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-number">　　　　<span class="hljs-attr">"errmsg": <span class="hljs-string">"ok", </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-literal"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-number"><span class="hljs-attr"><span class="hljs-string">　　　　<span class="hljs-attr">"user_info": { </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-literal"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-number"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr">　　　　　　　　<span class="hljs-attr">"nick": <span class="hljs-string">"张三", </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-literal"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-number"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-attr"><span class="hljs-string">　　　　　　　　<span class="hljs-attr">"openid": <span class="hljs-string">"liSii8KCxxxxx", </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-literal"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-number"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string">　　　　　　　　<span class="hljs-attr">"unionid": <span class="hljs-string">"7Huu46kk" </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-literal"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-number"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string">　　　　　　　　}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-literal"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-number"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string">　　　　　&nbsp;}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-keyword"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-comment"><span class="hljs-keyword"><span class="hljs-comment"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-literal"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-keyword"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-built_in"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-number"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string"><span class="hljs-attr"><span class="hljs-string">4.</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>通过创建好微应用的appKey、appSecret获取access_token</p>
<p>　　DefaultDingTalkClient client = <span class="hljs-keyword">new DefaultDingTalkClient(<span class="hljs-string">"https://oapi.dingtalk.com/gettoken"); </span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string">　　OapiGettokenRequest request = <span class="hljs-keyword">new OapiGettokenRequest(); </span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword">　　request.setAppkey(<span class="hljs-string">"appkey");　　//appkey和appsecret是企业内部创建微应用的appkey和appsecret</span></span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string">　　request.setAppsecret(<span class="hljs-string">"appsecret"); </span></span></span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string">　　request.setHttpMethod(<span class="hljs-string">"GET"); </span></span></span></span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string">　　OapiGettokenResponse response = client.execute(request);</span></span></span></span></span></span>　</p>
<p>　　返回结果：{</p>
<p>　　　　　　　　<span class="hljs-string">"errcode": <span class="hljs-number">0, </span></span></p>
<p><span class="hljs-string"><span class="hljs-number">　　　　　　　　<span class="hljs-string">"errmsg": <span class="hljs-string">"ok", </span></span></span></span></p>
<p><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string">　　　　　　　　<span class="hljs-string">"access_token": </span></span></span></span></span></p>
<p><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string">　　　　　　　　<span class="hljs-string">"fw8ef8we8f76e6f7s8df8s"</span></span></span></span></span></span></p>
<p><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string">　　　　　　　　 }</span></span></span></span></span></span></p>
<p>5.通过3步获取到的unionid和4步获取到的access_token获取userid</p>
<p>　　DingTalkClient client = <span class="hljs-keyword">new DefaultDingTalkClient(<span class="hljs-string">"https://oapi.dingtalk.com/user/getUseridByUnionid"); </span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string">　　OapiUserGetUseridByUnionidRequest request = <span class="hljs-keyword">new OapiUserGetUseridByUnionidRequest(); </span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword">　　request.setUnionid(<span class="hljs-string">"M9Ar4MVQA4vk4iPRwIJdTXAiEiE"); </span></span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string">　　request.setHttpMethod(<span class="hljs-string">"GET"); </span></span></span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string">　　OapiUserGetUseridByUnionidResponse response = client.execute(request, accessToken);</span></span></span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string">　　返回结果：{ </span></span></span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string">　　　　　　　　<span class="hljs-string">"errcode": <span class="hljs-number">0, </span></span></span></span></span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number">　　　　　　　　<span class="hljs-string">"errmsg": <span class="hljs-string">"ok", </span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string">　　　　　　　　<span class="hljs-string">"contactType": <span class="hljs-number">0, </span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number">　　　　　　　　<span class="hljs-string">"userid": <span class="hljs-string">"userid1" </span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string">　　　　　　　　}</span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string">6.获取用户详情</span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string">　　DingTalkClient client = <span class="hljs-keyword">new DefaultDingTalkClient(<span class="hljs-string">"https://oapi.dingtalk.com/user/get"); </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string">　　OapiUserGetRequest request = <span class="hljs-keyword">new OapiUserGetRequest(); </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword">　　request.setUserid(<span class="hljs-string">"zhangsan");　　//第五步获取到的userid</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string">　　request.setHttpMethod(<span class="hljs-string">"GET"); </span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string">　　OapiUserGetResponse response = client.execute(request, accessToken);　　　//4步获取到的access_token</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string"><span class="hljs-string"><span class="hljs-number"><span class="hljs-string"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-string">　　返回结果：</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span>{</p>
<p style="margin-left: 120px;"> "errcode": 0,<br />    "unionid": "PiiiPyQqBNBii0HnCJ3zljcuAiEiE",<br />    "remark": "remark",<br />    "userid": "zhangsan",<br />    "isLeaderInDepts": "{1:false}",<br />    "isBoss": false,<br />    "hiredDate": 1520265600000,<br />    "isSenior": false,<br />    "tel": "xxx-xxxxxxxx",<br />    "department": [1,2],<br />    "workPlace": "place",<br />    "email": "test@xxx.com",<br />    "orderInDepts": "{1:71738366882504}",<br />    "mobile": "1xxxxxxxxxx",<br />    "errmsg": "ok",<br />    "active": false,<br />    "avatar": "xxx",<br />    "isAdmin": false,<br />    "isHide": false,<br />    "jobnumber": "001",<br />    "name": "张三",<br />    "extattr": {},<br />    "stateCode": "86",<br />    "position": "manager",<br />    "roles": [<br />　　{<br />            　　　　"id": 149507744,<br />            　　　　"name": "总监",<br />            　　　　"groupName": "职务"<br />        　　　　}<br />　　　]<br />}</p>
<p><em id="__mceDel">　　这边需要对创建的应用进行授权才能获取到用户详情</em></p>
<p><em>&nbsp;</em></p>
<p>&nbsp;</p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>