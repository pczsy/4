<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修javaSpring学习总结day_01' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>javaSpring学习总结day_01</center></div><div class='banquan'>原文出处:本文由博客园博主cmzshallow提供。<br/>
原文连接:https://www.cnblogs.com/shallowcmz/p/11686811.html</div><br>
    <pre><code><span style="font-family: 宋体;">本文章用于总结自己学习知识，有不足或错误之处清谅解。</span><br /><span style="font-size: 16px; font-family: 宋体;"> <strong>bean.xml 文件的读取方式：</strong></span><br /><span style="font-family: 宋体;"> 　　ClassPathXmlApplicationContext:  它是只能加载类路径下的配置文件         <span style="color: #ff0000;">推荐<br />　　　　</span>1.加载配置文件:</span><br /><span style="font-family: 宋体;">　　　　　　ClassPathXmlApplicationContext ac = new ClassPathXmlApplicationContext("bean.xml");</span><br /><span style="font-family: 宋体;">　　　　2.根据bean的id获取对象</span><br /><span style="font-family: 宋体;">　　　　　　ICustomerService cs1 = (ICustomerService) ac.getBean("customerService");</span><br /><span style="font-family: 宋体;"> 　　FileSystemXmlApplicationContext: 它是可以加载磁盘任意位置的配置文件</span></code></pre>
<pre><code><span style="font-size: 16px; font-family: 宋体;"><strong> Bean创建的两种规则：</strong></span><br /><span style="font-size: 14px; font-family: 宋体;"><strong>  　　BeanFactory:</strong></span><br /><span style="font-family: 宋体;">          提供的是一种延迟加载思想来创建bean对象。即：bean对象什么时候用，什么时候创建</span></code></pre>
<pre><code><span style="font-size: 14px; font-family: 宋体;"><strong>  　　ApplicationContext:</strong></span><br /><span style="font-family: 宋体;">          提供的是一种立即加载思想来创建bean对象。即：只要一解析完配置文件，就创建bean对象<br /></span></code></pre>
<pre><code><span style="font-family: 宋体;">　　　　　　1.获取容器</span><br /><span style="font-family: 宋体;">　　　　　　ApplicationContext ac = new ClassPathXmlApplicationContext("bean.xml");</span><br /><span style="font-family: 宋体;">　　　　　　2.根据bean的id获取对象</span><br /><span style="font-family: 宋体;">　　　　　　ICustomerService cs1 = (ICustomerService) ac.getBean("customerService");</span><br /><span style="font-family: 宋体;">　　　　　　cs1.saveCustomer();</span></code></pre>
<pre><code><span style="font-family: 宋体;"><span style="font-size: 16px;"><strong> Bean的作用范围：</strong></span><br />          它是可以通过配置的方式来调整作用范围<br />          配置的属性：bean标签的scope属性<br />          取值：<br />              singleton       ：单例的（默认值）<br />              prototype       ：多例的（当我们让spring接管struts2的action创建时，action必须配置此值）<br />              request         ：作用范围是一次请求，和当前请求的转发<br />              session         ：作用范围是一次会话<br />              globalsession   ：作用范围是一次全局会话<br /><strong><span style="font-size: 16px;"> Bean的生命周期：</span></strong><br />          设计bean标签的两个属性：<br />                 init-method<br />                 destroy-method<br />          单例：<br />                 出生：容器创建，对象出生<br />                 活着：只要容器在，对象就在<br />                 死亡：容器销毁，对象消亡<br />          多例：<br />                 出生：每次使用时，创建对象<br />                 活着：只要对象在使用中，就一直活着<br />                 死亡：当对象长时间不使用，并且也没有别的对象引用时，由java的垃圾回收器回收<br /></span></code></pre>
<pre><code><span style="font-size: 16px; font-family: 宋体;"><strong> Bean的三种创建方式：</strong></span><br /><span style="font-family: 宋体;"><strong>  第一种方式：调用默认无参构造函数创建      <span style="color: #ff0000;">常用</span></strong></span><br /><span style="font-family: 宋体;">      默认情况下，如果没有默认无参构造函数，则创建失败，会报异常</span><br /><br /><span style="font-family: 宋体;">　　　　bean.xml中配置：</span><br /><span style="font-family: 宋体;">      　　&lt;bean id="customerService" class="spring.service.impl.CustomerServiceImpl"&gt;&lt;/bean&gt;</span></code></pre>
<pre><code><span style="font-family: 宋体;"><strong>  第二种方式：使用静态工厂中的方法创建对象</strong></span><br /><span style="font-family: 宋体;">      需要使用bean标签的factory-method属性，指定静态工厂中创建对象的方法</span><br /><span style="font-family: 宋体;">　　　 配置使用静态工厂创建bean对象</span><br /><span style="font-family: 宋体;">      使用class中的factory-method创建对象，用id来提取</span><br /><br /><span style="font-family: 宋体;">　　　　bean.xml中配置:</span><br /><span style="font-family: 宋体;">　　　　　　&lt;bean id="staticCustomerService" class="spring.factory.staticFactory" factory-method="getCustomerService"&gt;&lt;/bean&gt;</span></code></pre>
<pre><code><span style="font-family: 宋体;">　　　　staticFactory.java中配置：</span><br /><span style="font-family: 宋体;">　　　　　　public static ICustomerService getCustomerService(){ return new CustomerServiceImpl();<br /></span></code></pre>
<pre><code><span style="font-family: 宋体;"><strong>  第三种方式：使用示例工厂中的方法创建.<br /></strong></span></code></pre>
<pre><code><span style="font-family: 宋体;">　　　 需要使用bean标签的factory-method属性，指定示例工厂中创建对象的方法</span><br /><span style="font-family: 宋体;">      配置使用实例工厂创建bean对象</span></code></pre>
<pre><code><span style="font-family: 宋体;">　　　 bean.xml中配置：</span><br /><span style="font-family: 宋体;">      　　&lt;bean id="instanceFactory" class="spring.factory.instanceFactory"&gt;&lt;/bean&gt;</span><br /><span style="font-family: 宋体;">      　　&lt;bean id="instanceCustomerService" class="spring.factory.instanceFactory" factory-method="getCustomerService"&gt;&lt;/bean&gt;</span><br /><br /><span style="font-family: 宋体;"> 　　　instanceFactory.java中配置：</span><br /><span style="font-family: 宋体;">　　　　　　public static ICustomerService getCustomerService(){ return new CustomerServiceImpl(); }</span></code></pre>
<pre><code><span style="font-family: 宋体;"><strong><span style="font-size: 16px;"> Spring的依赖注入方式：</span><br /></strong>　　注入的方式有三种：</span><br /><span style="font-family: 宋体;">　　　　第一种：使用构造函数注入</span><br /><span style="font-family: 宋体;">　　　　第二种：使用set方法注入</span><br /><span style="font-family: 宋体;">　　　　第三种：使用注解注入</span><br /><br /><span style="font-family: 宋体;"><strong><span style="font-size: 14px;">　　使用构造函数注入：<br /></span></strong></span></code></pre>
<pre><code><span style="font-family: 宋体;">　　　　涉及的标签：constructor-arg</span><br /><span style="font-family: 宋体;">　　　　标签的属性：</span><br /><span style="font-family: 宋体;">    　　    type：   指定参数的类型</span><br /><span style="font-family: 宋体;">   　　     index：  指定参数的索引位置，从0开始</span><br /><span style="font-family: 宋体;">   　　     name：   指定参数的名称         （常用）</span><br /><span style="font-family: 宋体;">    　　    ========上面三个属性是指定给哪个参数赋值的，下面两个属性是指定赋什么值的========</span><br /><span style="font-family: 宋体;">     　　   value:   指定基本数据类型或String类型的数据</span><br /><span style="font-family: 宋体;">    　　    ref：    指定其他bean类型数据</span><br /><span style="font-family: 宋体;">　　　　标签出现的位置：bean标签内部</span><br /><span style="font-family: 宋体;">　　　　</span><br /><span style="font-family: 宋体;">　　　　bean.xml中的配置：</span></code></pre>
<pre><code><span style="font-family: 宋体;">　　　　　　&lt;bean id="customerService" class="spring.service.impl.CustomerServiceImpl"&gt;</span><br /><span style="font-family: 宋体;">   　　　　　　 &lt;constructor-arg name="driver" value="com.mysql.jdbc.Driver"&gt;&lt;/constructor-arg&gt;</span><br /><span style="font-family: 宋体;">   　　　　　　 &lt;constructor-arg name="port" value="3306"&gt;&lt;/constructor-arg&gt;</span><br /><span style="font-family: 宋体;">    　　　　　　&lt;constructor-arg name="today" ref="now"&gt;&lt;/constructor-arg&gt;</span><br /><span style="font-family: 宋体;">　　　　　　&lt;/bean&gt;</span><br /><span style="font-family: 宋体;">　　　　　　由于上文的配置使用了ref，所以需要在bean.xml中配置ref所用的类型：</span><br /><span style="font-family: 宋体;">　　　　　　&lt;bean id="now" class="java.util.Date"&gt;&lt;/bean&gt;</span></code></pre>
<pre><code><span style="font-size: 14px; font-family: 宋体;"><strong>　　使用set方法注入：<br /></strong></span></code></pre>
<pre><code><span style="font-family: 宋体;">　　　　涉及的标签：property</span><br /><span style="font-family: 宋体;">　　　　标签的属性：</span><br /><span style="font-family: 宋体;">      　　  name：   指定参数的set方法名称</span><br /><span style="font-family: 宋体;">     　　   value:   指定基本数据类型或String类型的数据</span><br /><span style="font-family: 宋体;">     　　   ref：    指定其他bean类型数据</span><br /><span style="font-family: 宋体;">　　　　标签出现的位置：bean标签内部</span><br /><span style="font-family: 宋体;">　　　　<span style="color: #ff0000;">注意：使用set方法注入需要注入的目标拥有set方法，否则配置会出现错误。（spring注入错误可以先检查这里）</span></span><br /><span style="font-family: 宋体;">　　　　</span><br /><span style="font-family: 宋体;">　　　　bean.xml中文件配置：</span></code></pre>
<pre><code><span style="font-family: 宋体;">　　　　&lt;bean id="customerService" class="spring.service.impl.CustomerServiceImpl"&gt;</span><br /><span style="font-family: 宋体;">   　　　　 &lt;property name="driver" value="com.mysql.jdbc.Driver"&gt;&lt;/property&gt;</span><br /><span style="font-family: 宋体;">   　　　　 &lt;property name="port" value="3307"&gt;&lt;/property&gt;</span><br /><span style="font-family: 宋体;">  　　　　  &lt;property name="today" ref="now"&gt;&lt;/property&gt;</span><br /><span style="font-family: 宋体;">　　　　&lt;/bean&gt;</span><br /><span style="font-family: 宋体;">　　　　&lt;bean id="now" class="java.util.Date"&gt;&lt;/bean&gt;</span><br /><br /><span style="font-family: 宋体;">　　　　CustomerServiceImpl.java中需要有：</span></code></pre>
<pre><code><span style="font-family: 宋体;">　　　　public void setDriver(String driver) { this.driver = driver; }</span><br /><span style="font-family: 宋体;">　　　　public void setPort(Integer port) { this.port = port; }</span><br /><span style="font-family: 宋体;">　　　　public void setToday(Date today) { this.today = today; }</span><br /><br /></code></pre>
<pre><code><span style="font-family: 宋体;"><strong>　  <span style="font-size: 14px;">使用注解注入：在day_02中介绍<br /><br />　　数据类型的注入： <br /></span></strong>　　　　注入的数据类型有3类：</span><br /><span style="font-family: 宋体;">　　　　　　第一类：基本类型和String类型</span><br /><span style="font-family: 宋体;">　　　　　　第二类：其他bean类型（必须是在spring的配置文件中出现过的bean）</span><br /><span style="font-family: 宋体;">　　　　　　第三类：复杂类型（集合类型）</span></code></pre>
<pre><code><span style="font-family: 宋体;">　　　　　　&lt;bean id="customerService" class="spring.service.impl.CustomerServiceImpl"&gt;</span><br /><span style="font-family: 宋体;">   　　　　　　 &lt;property name="driver" value="com.mysql.jdbc.Driver"&gt;&lt;/property&gt;</span><br /><span style="font-family: 宋体;">   　　　　　　 &lt;property name="port" value="3307"&gt;&lt;/property&gt;</span><br /><span style="font-family: 宋体;">  　　　　　　  &lt;property name="today" ref="now"&gt;&lt;/property&gt;</span><br /><span style="font-family: 宋体;">　　　　　　&lt;/bean&gt;</span><br /><span style="font-family: 宋体;">　　　　　　&lt;bean id="now" class="java.util.Date"&gt;&lt;/bean&gt;</span><br /><span style="font-family: 宋体;">　　　　</span><br /><span style="font-family: 宋体;">　　　　　　如上例中：value则是属于第一类中的String类型，ref中则是第二类，由于ref是其他bean类型，所以需要在下面配置ref中now这个bean类型。</span></code></pre>
<pre><code><span style="font-family: 宋体;">　　　　第三类：复杂类型的注入</span><br /><span style="font-family: 宋体;">       　　结构相同，标签可以互换</span><br /><span style="font-family: 宋体;">       　　如：map和properties可以互换</span><br /><span style="font-family: 宋体;">       　　    list，array，set可以两两交换</span></code></pre>
<pre><code><span style="font-family: 宋体;">    　　　 &lt;bean id="customerService" class="spring.service.impl.CustomerServiceImpl"&gt;</span><br /><span style="font-family: 宋体;">       　　　 &lt;property name="myStrs"&gt;</span><br /><span style="font-family: 宋体;">             　　&lt;array&gt;</span><br /><span style="font-family: 宋体;">               　　 &lt;value&gt;AAA&lt;/value&gt;</span><br /><span style="font-family: 宋体;">               　　 &lt;value&gt;BBB&lt;/value&gt;</span><br /><span style="font-family: 宋体;">               　　 &lt;value&gt;CCC&lt;/value&gt;</span><br /><span style="font-family: 宋体;">           　　 &lt;/array&gt;</span><br /><span style="font-family: 宋体;">       　　  &lt;/property&gt;</span><br /><br /><span style="font-family: 宋体;">        　　 &lt;property name="myList"&gt;</span><br /><span style="font-family: 宋体;">           　　 &lt;list&gt;</span><br /><span style="font-family: 宋体;">             　　   &lt;value&gt;AAA&lt;/value&gt;</span><br /><span style="font-family: 宋体;">             　　   &lt;value&gt;BBB&lt;/value&gt;</span><br /><span style="font-family: 宋体;">            　　    &lt;value&gt;CCC&lt;/value&gt;</span><br /><span style="font-family: 宋体;">           　　 &lt;/list&gt;</span><br /><span style="font-family: 宋体;">     　　    &lt;/property&gt;</span><br /><br /><span style="font-family: 宋体;">      　　   &lt;property name="mySet"&gt;</span><br /><span style="font-family: 宋体;">        　　    &lt;set&gt;</span><br /><span style="font-family: 宋体;">           　　     &lt;value&gt;AAA&lt;/value&gt;</span><br /><span style="font-family: 宋体;">         　　       &lt;value&gt;BBB&lt;/value&gt;</span><br /><span style="font-family: 宋体;">           　　     &lt;value&gt;CCC&lt;/value&gt;</span><br /><span style="font-family: 宋体;">         　　   &lt;/set&gt;</span><br /><span style="font-family: 宋体;">       　　  &lt;/property&gt;</span><br /><br /><span style="font-family: 宋体;">     　　    &lt;property name="myMap"&gt;</span><br /><span style="font-family: 宋体;">          　　  &lt;map&gt;</span><br /><span style="font-family: 宋体;">            　　    &lt;entry key="testD" value="DDD"&gt;&lt;/entry&gt;</span><br /><span style="font-family: 宋体;">             　　   &lt;entry key="testE"&gt;</span><br /><span style="font-family: 宋体;">             　　          &lt;value&gt;EEE&lt;/value&gt;</span><br /><span style="font-family: 宋体;">             　　   &lt;/entry&gt;</span><br /><span style="font-family: 宋体;">            　　    &lt;!--上面两种表示方法都可以--&gt;</span><br /><span style="font-family: 宋体;">          　　  &lt;/map&gt;</span><br /><span style="font-family: 宋体;">      　　   &lt;/property&gt;</span><br /><br /><span style="font-family: 宋体;">       　　  &lt;property name="myProps"&gt;</span><br /><span style="font-family: 宋体;">      　　      &lt;props&gt;</span><br /><span style="font-family: 宋体;">               　　 &lt;prop key="testF"&gt;FFF&lt;/prop&gt;</span><br /><span style="font-family: 宋体;">              　　  &lt;prop key="testG"&gt;GGG&lt;/prop&gt;</span><br /><span style="font-family: 宋体;">           　　 &lt;/props&gt;</span><br /><span style="font-family: 宋体;">       　　  &lt;/property&gt;</span><br /><span style="font-family: 宋体;">    　　　 &lt;/bean&gt;</span><br /><br /><span style="font-size: 14px; font-family: 宋体;">     <strong><span style="color: #ff0000;">交换标签后</span></strong></span><br /><br /><span style="font-family: 宋体;">   　　　　  &lt;property name="myStrs"&gt;</span><br /><span style="font-family: 宋体;">       　　　　 &lt;list&gt;</span><br /><span style="font-family: 宋体;">        　　　　    &lt;value&gt;AAA&lt;/value&gt;</span><br /><span style="font-family: 宋体;">       　　　　     &lt;value&gt;BBB&lt;/value&gt;</span><br /><span style="font-family: 宋体;">      　　　　      &lt;value&gt;CCC&lt;/value&gt;</span><br /><span style="font-family: 宋体;">       　　　　 &lt;/list&gt;</span><br /><span style="font-family: 宋体;"> 　　　　    &lt;/property&gt;</span><br /><br /><span style="font-family: 宋体;"> 　　　　    &lt;property name="myList"&gt;</span><br /><span style="font-family: 宋体;">      　　　　  &lt;array&gt;</span><br /><span style="font-family: 宋体;">       　　　　     &lt;value&gt;AAA&lt;/value&gt;</span><br /><span style="font-family: 宋体;">       　　　　     &lt;value&gt;BBB&lt;/value&gt;</span><br /><span style="font-family: 宋体;">      　　　　      &lt;value&gt;CCC&lt;/value&gt;</span><br /><span style="font-family: 宋体;">    　　　　    &lt;/array&gt;</span><br /><span style="font-family: 宋体;"> 　　　　    &lt;/property&gt;</span><br /><br /><span style="font-family: 宋体;">  　　　　  &lt;property name="myMap"&gt;</span><br /><span style="font-family: 宋体;">       　　　　 &lt;map&gt;</span><br /><span style="font-family: 宋体;">         　　　　   &lt;props&gt;</span><br /><span style="font-family: 宋体;">          　　　　      &lt;prop key="testF"&gt;FFF&lt;/prop&gt;</span><br /><span style="font-family: 宋体;">         　　　　       &lt;prop key="testG"&gt;GGG&lt;/prop&gt;</span><br /><span style="font-family: 宋体;">         　　　　   &lt;/props&gt;</span><br /><span style="font-family: 宋体;">      　　　　  &lt;/map&gt;</span><br /><span style="font-family: 宋体;">  　　　　   &lt;/property&gt;</span><br /><br /><span style="font-family: 宋体;">   　　　　  &lt;property name="myProps"&gt;</span><br /><span style="font-family: 宋体;">     　　　　   &lt;entry key="testD" value="DDD"&gt;&lt;/entry&gt;</span><br /><span style="font-family: 宋体;">      　　　　  &lt;entry key="testE"&gt;</span><br /><span style="font-family: 宋体;">      　　　　      &lt;value&gt;EEE&lt;/value&gt;</span><br /><span style="font-family: 宋体;">      　　　　  &lt;/entry&gt;</span><br /><span style="font-family: 宋体;">  　　　　   &lt;/property&gt;</span></code></pre>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>