<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修java中文件复制的4种方式' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>java中文件复制的4种方式</center></div><div class='banquan'>原文出处:本文由博客园博主壹佰提供。<br/>
原文连接:https://www.cnblogs.com/xxjcai/p/11581987.html</div><br>
    <p>&nbsp; &nbsp; &nbsp; 今天一个同事问我文件复制的问题，他一个100M的文件复制的指定目录下竟然成了1G多，吓我一跳，后来看了他的代码发现是自己通过字节流复制的，定义的字节数组很大，导致复制后目标文件非常大，其实就是空行等一些无效空间。我也是很少用这种方式拷贝问价，大多数用Apache提供的commons-io中的FileUtils，后来在网上查了下，发现还有其他的方式，效率更高，所以在此整理一下，也是自己的一个学习。</p>
<p><strong>1. 使用FileStreams复制</strong></p>
<p><strong>比较经典的一个代码，使用FileInputStream读取文件A的字节，使用FileOutputStream写入到文件B。</strong></p>
<pre><code><code class="java  language-java"><span class="token keyword"><span style="font-size: 14px;">public </span><span class="token keyword"><span style="font-size: 14px;">static </span><span class="token keyword"><span style="font-size: 14px;">void </span><span class="token function"><span style="font-size: 14px;">copy</span><span class="token punctuation"><span style="font-size: 14px;">(</span><span class="token class-name"><span style="font-size: 14px;">String source</span><span class="token punctuation"><span style="font-size: 14px;">, </span><span class="token class-name"><span style="font-size: 14px;">String dest</span><span class="token keyword"><span class="token punctuation"><span style="font-size: 14px;">, </span><span class="token keyword"><span style="font-size: 14px;">int bufferSize</span><span class="token punctuation"><span style="font-size: 14px;">) </span><span class="token punctuation"><span style="font-size: 14px;">{
    </span><span class="token class-name"><span style="font-size: 14px;">InputStream in </span><span class="token operator"><span style="font-size: 14px;">= </span><span class="token keyword"><span style="font-size: 14px;">null</span><span class="token punctuation"><span style="font-size: 14px;">;
    </span><span class="token class-name"><span style="font-size: 14px;">OutputStream out </span><span class="token operator"><span style="font-size: 14px;">= </span><span class="token keyword"><span style="font-size: 14px;">null</span><span class="token punctuation"><span style="font-size: 14px;">;
    </span><span class="token keyword"><span style="font-size: 14px;">try </span><span class="token punctuation"><span style="font-size: 14px;">{
        in </span><span class="token operator"><span style="font-size: 14px;">= </span><span class="token keyword"><span style="font-size: 14px;">new </span><span class="token class-name"><span style="font-size: 14px;">FileInputStream</span><span class="token punctuation"><span style="font-size: 14px;">(</span><span class="token keyword"><span style="font-size: 14px;">new </span><span class="token class-name"><span style="font-size: 14px;">File</span><span class="token punctuation"><span style="font-size: 14px;">(source</span><span class="token punctuation"><span style="font-size: 14px;">)</span><span class="token punctuation"><span style="font-size: 14px;">)</span><span class="token punctuation"><span style="font-size: 14px;">;
        out </span><span class="token operator"><span style="font-size: 14px;">= </span><span class="token keyword"><span style="font-size: 14px;">new </span><span class="token class-name"><span style="font-size: 14px;">FileOutputStream</span><span class="token punctuation"><span style="font-size: 14px;">(</span><span class="token keyword"><span style="font-size: 14px;">new </span><span class="token class-name"><span style="font-size: 14px;">File</span><span class="token punctuation"><span style="font-size: 14px;">(</span><span class="token keyword"><span style="font-size: 14px;">dest</span><span class="token punctuation"><span style="font-size: 14px;">)</span><span class="token punctuation"><span style="font-size: 14px;">)</span><span class="token punctuation"><span style="font-size: 14px;">;

        </span><span class="token keyword"><span style="font-size: 14px;">byte</span><span class="token punctuation"><span style="font-size: 14px;">[</span><span class="token punctuation"><span style="font-size: 14px;">] buffer </span><span class="token operator"><span style="font-size: 14px;">= </span><span class="token keyword"><span style="font-size: 14px;">new </span><span class="token keyword"><span style="font-size: 14px;">byte</span><span class="token punctuation"><span style="font-size: 14px;">[bufferSize</span><span class="token punctuation"><span style="font-size: 14px;">]</span><span class="token punctuation"><span style="font-size: 14px;">;
        </span><span class="token keyword"><span style="font-size: 14px;">int len</span><span class="token punctuation"><span style="font-size: 14px;">;

        </span><span class="token keyword"><span style="font-size: 14px;">while </span><span class="token punctuation"><span style="font-size: 14px;">(</span><span class="token punctuation"><span style="font-size: 14px;">(len </span><span class="token operator"><span style="font-size: 14px;">= in</span><span class="token punctuation"><span style="font-size: 14px;">.</span><span class="token function"><span style="font-size: 14px;">read</span><span class="token punctuation"><span style="font-size: 14px;">(buffer</span><span class="token punctuation"><span style="font-size: 14px;">)</span><span class="token punctuation"><span style="font-size: 14px;">) </span><span class="token operator"><span style="font-size: 14px;">&gt; </span><span class="token number"><span style="font-size: 14px;">0</span><span class="token punctuation"><span style="font-size: 14px;">) </span><span class="token punctuation"><span style="font-size: 14px;">{
            out</span><span class="token punctuation"><span style="font-size: 14px;">.</span><span class="token function"><span style="font-size: 14px;">write</span><span class="token punctuation"><span style="font-size: 14px;">(buffer</span><span class="token punctuation"><span style="font-size: 14px;">, </span><span class="token number"><span style="font-size: 14px;">0</span><span class="token punctuation"><span style="font-size: 14px;">, len</span><span class="token punctuation"><span style="font-size: 14px;">)</span><span class="token punctuation"><span style="font-size: 14px;">;
        </span><span class="token punctuation"><span style="font-size: 14px;">}
    </span><span class="token punctuation"><span style="font-size: 14px;">} </span><span class="token keyword"><span style="font-size: 14px;">catch </span><span class="token punctuation"><span style="font-size: 14px;">(</span><span class="token class-name"><span style="font-size: 14px;">Exception e</span><span class="token punctuation"><span style="font-size: 14px;">) </span><span class="token punctuation"><span style="font-size: 14px;">{
        </span><span class="token class-name"><span style="font-size: 14px;">Log</span><span class="token punctuation"><span style="font-size: 14px;">.</span><span class="token function"><span style="font-size: 14px;">w</span><span class="token punctuation"><span style="font-size: 14px;">(TAG </span><span class="token operator"><span style="font-size: 14px;">+ </span><span class="token string"><span style="font-size: 14px;">":copy"</span><span class="token punctuation"><span style="font-size: 14px;">, </span><span class="token string"><span style="font-size: 14px;">"error occur while copy"</span><span class="token punctuation"><span style="font-size: 14px;">, e</span><span class="token punctuation"><span style="font-size: 14px;">)</span><span class="token punctuation"><span style="font-size: 14px;">;
    </span><span class="token punctuation"><span style="font-size: 14px;">} </span><span class="token keyword"><span style="font-size: 14px;">finally </span><span class="token punctuation"><span style="font-size: 14px;">{
        </span><span class="token function"><span style="font-size: 14px;">safelyClose</span><span class="token punctuation"><span style="font-size: 14px;">(TAG </span><span class="token operator"><span style="font-size: 14px;">+ </span><span class="token string"><span style="font-size: 14px;">":copy"</span><span class="token punctuation"><span style="font-size: 14px;">, in</span><span class="token punctuation"><span style="font-size: 14px;">)</span><span class="token punctuation"><span style="font-size: 14px;">;
        </span><span class="token function"><span style="font-size: 14px;">safelyClose</span><span class="token punctuation"><span style="font-size: 14px;">(TAG </span><span class="token operator"><span style="font-size: 14px;">+ </span><span class="token string"><span style="font-size: 14px;">":copy"</span><span class="token punctuation"><span style="font-size: 14px;">, out</span><span class="token punctuation"><span style="font-size: 14px;">)</span><span class="token punctuation"><span style="font-size: 14px;">;
    </span><span class="token punctuation"><span style="font-size: 14px;">}
</span><span class="token punctuation"><span style="font-size: 14px;">}  </span> <br />2.</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></code></pre>
<h1><strong><span style="font-size: 14px;">2、使用FileChannel</span></strong></h1>
<p><strong><span style="font-size: 14px;">Java NIO包括transferFrom方法,根据文档应该比文件流复制的速度更快。</span></strong></p>
<p>&nbsp;</p>
<pre><code><span style="font-size: 14px;"><code class="java  language-java"><span class="token keyword">public <span class="token keyword">static <span class="token keyword">void <span class="token function">copyNio<span class="token punctuation">(<span class="token class-name">String source<span class="token punctuation">, <span class="token class-name">String dest<span class="token keyword"><span class="token punctuation">) <span class="token punctuation">{
    <span class="token class-name">FileChannel input <span class="token operator">= <span class="token keyword">null<span class="token punctuation">;
    <span class="token class-name">FileChannel output <span class="token operator">= <span class="token keyword">null<span class="token punctuation">;

    <span class="token keyword">try <span class="token punctuation">{
        input <span class="token operator">= <span class="token keyword">new <span class="token class-name">FileInputStream<span class="token punctuation">(<span class="token keyword">new <span class="token class-name">File<span class="token punctuation">(from<span class="token punctuation">)<span class="token punctuation">)<span class="token punctuation">.<span class="token function">getChannel<span class="token punctuation">(<span class="token punctuation">)<span class="token punctuation">;
        output <span class="token operator">= <span class="token keyword">new <span class="token class-name">FileOutputStream<span class="token punctuation">(<span class="token keyword">new <span class="token class-name">File<span class="token punctuation">(<span class="token keyword">to<span class="token punctuation">)<span class="token punctuation">)<span class="token punctuation">.<span class="token function">getChannel<span class="token punctuation">(<span class="token punctuation">)<span class="token punctuation">;
        output<span class="token punctuation">.<span class="token function">transferFrom<span class="token punctuation">(input<span class="token punctuation">, <span class="token number">0<span class="token punctuation">, input<span class="token punctuation">.<span class="token function">size<span class="token punctuation">(<span class="token punctuation">)<span class="token punctuation">)<span class="token punctuation">;
    <span class="token punctuation">} <span class="token keyword">catch <span class="token punctuation">(<span class="token class-name">Exception e<span class="token punctuation">) <span class="token punctuation">{
        <span class="token class-name">Log<span class="token punctuation">.<span class="token function">w<span class="token punctuation">(TAG <span class="token operator">+ <span class="token string">"copyNio"<span class="token punctuation">, <span class="token string">"error occur while copy"<span class="token punctuation">, e<span class="token punctuation">)<span class="token punctuation">;
    <span class="token punctuation">} <span class="token keyword">finally <span class="token punctuation">{
        <span class="token function">safelyClose<span class="token punctuation">(TAG <span class="token operator">+ <span class="token string">"copyNio"<span class="token punctuation">, input<span class="token punctuation">)<span class="token punctuation">;
        <span class="token function">safelyClose<span class="token punctuation">(TAG <span class="token operator">+ <span class="token string">"copyNio"<span class="token punctuation">, output<span class="token punctuation">)<span class="token punctuation">;
    <span class="token punctuation">}
<span class="token punctuation">}<br /><br /><strong>3、 使用Apache Commons IO复制<br /></strong>Appache Commons IO 提供了一个<code>FileUtils.copyFile(File from, File to)</code>方法用于文件复制，如果项目里使用到了这个类库，使用这个方法是个不错的选择。<br />它的内部也是使用Java NIO的<code>FileChannel</code>实现的。<br />commons-io的路径：http://commons.apache.org/proper/commons-io/javadocs/api-release/index.html。里面还有很多实用的方法，如拷贝目录、拷贝指定格式文件等。<br /></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></span></code></pre>
<pre><code><span style="font-size: 14px;"><code class="java  language-java"><span class="token keyword">private <span class="token keyword">static <span class="token keyword">void  <span class="token function">copyFileByApacheCommonsIO<span class="token punctuation">(<span class="token class-name">File source<span class="token punctuation">, <span class="token class-name">File dest<span class="token punctuation">) <span class="token keyword">throws <span class="token class-name">IOException <span class="token punctuation">{
    <span class="token class-name">FileUtils<span class="token punctuation">.<span class="token function">copyFile<span class="token punctuation">(source<span class="token punctuation">, dest<span class="token punctuation">)<span class="token punctuation">;
<span class="token punctuation">}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></span></code></pre>
<pre><code><span style="font-size: 14px;"><code class="java  language-java"><span class="token keyword"><span class="token keyword"><span class="token keyword"><span class="token function"><span class="token punctuation"><span class="token class-name"><span class="token punctuation"><span class="token class-name"><span class="token keyword"><span class="token punctuation"><span class="token punctuation"><span class="token class-name"><span class="token operator"><span class="token keyword"><span class="token punctuation"><span class="token class-name"><span class="token operator"><span class="token keyword"><span class="token punctuation"><span class="token keyword"><span class="token punctuation"><span class="token operator"><span class="token keyword"><span class="token class-name"><span class="token punctuation"><span class="token keyword"><span class="token class-name"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token operator"><span class="token keyword"><span class="token class-name"><span class="token punctuation"><span class="token keyword"><span class="token class-name"><span class="token punctuation"><span class="token keyword"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token punctuation"><span class="token number"><span class="token punctuation"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token keyword"><span class="token punctuation"><span class="token class-name"><span class="token punctuation"><span class="token punctuation"><span class="token class-name"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token operator"><span class="token string"><span class="token punctuation"><span class="token string"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token keyword"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token operator"><span class="token string"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token operator"><span class="token string"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><strong>4、使用Java7的Files类复制<br /></strong></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></span></code></pre>
<pre><code><span style="font-size: 14px;"><code class="java  language-java"><span class="token keyword">private <span class="token keyword">static <span class="token keyword">void <span class="token function">copyFileUsingJava7Files<span class="token punctuation">(<span class="token class-name">File source<span class="token punctuation">, <span class="token class-name">File dest<span class="token punctuation">) <span class="token keyword">throws <span class="token class-name">IOException <span class="token punctuation">{
    <span class="token class-name">Files<span class="token punctuation">.<span class="token function">copy<span class="token punctuation">(source<span class="token punctuation">.<span class="token function">toPath<span class="token punctuation">(<span class="token punctuation">)<span class="token punctuation">, dest<span class="token punctuation">.<span class="token function">toPath<span class="token punctuation">(<span class="token punctuation">)<span class="token punctuation">)<span class="token punctuation">;
<span class="token punctuation">}</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></span></code></pre>
<pre><code><span style="font-size: 14px;"><code class="java  language-java"><span class="token keyword"><span class="token keyword"><span class="token keyword"><span class="token function"><span class="token punctuation"><span class="token class-name"><span class="token punctuation"><span class="token class-name"><span class="token keyword"><span class="token punctuation"><span class="token punctuation"><span class="token class-name"><span class="token operator"><span class="token keyword"><span class="token punctuation"><span class="token class-name"><span class="token operator"><span class="token keyword"><span class="token punctuation"><span class="token keyword"><span class="token punctuation"><span class="token operator"><span class="token keyword"><span class="token class-name"><span class="token punctuation"><span class="token keyword"><span class="token class-name"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token operator"><span class="token keyword"><span class="token class-name"><span class="token punctuation"><span class="token keyword"><span class="token class-name"><span class="token punctuation"><span class="token keyword"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token punctuation"><span class="token number"><span class="token punctuation"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token keyword"><span class="token punctuation"><span class="token class-name"><span class="token punctuation"><span class="token punctuation"><span class="token class-name"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token operator"><span class="token string"><span class="token punctuation"><span class="token string"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token keyword"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token operator"><span class="token string"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token operator"><span class="token string"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><strong>我没有亲测，找了下网友的测试程序和输出，性能数据供大家参考（来源：https://www.jb51.net/article/70412.htm）<br /></strong></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></span></code></pre>
<src class="line number1 index0 alt2"><code class="java keyword">import</code> <code class="java plain">java.io.File;</code>
<pre><code></code></pre>
<src class="line number2 index1 alt1"><code class="java keyword">import</code> <code class="java plain">java.io.FileInputStream;</code>
<pre><code></code></pre>
<src class="line number3 index2 alt2"><code class="java keyword">import</code> <code class="java plain">java.io.FileOutputStream;</code>
<pre><code></code></pre>
<src class="line number4 index3 alt1"><code class="java keyword">import</code> <code class="java plain">java.io.IOException;</code>
<pre><code></code></pre>
<src class="line number5 index4 alt2"><code class="java keyword">import</code> <code class="java plain">java.io.InputStream;</code>
<pre><code></code></pre>
<src class="line number6 index5 alt1"><code class="java keyword">import</code> <code class="java plain">java.io.OutputStream;</code>
<pre><code></code></pre>
<src class="line number7 index6 alt2"><code class="java keyword">import</code> <code class="java plain">java.nio.channels.FileChannel;</code>
<pre><code></code></pre>
<src class="line number8 index7 alt1"><code class="java keyword">import</code> <code class="java plain">java.nio.file.Files;</code>
<pre><code></code></pre>
<src class="line number9 index8 alt2"><code class="java keyword">import</code> <code class="java plain">org.apache.commons.io.FileUtils;</code>
<pre><code></code></pre>
<src class="line number11 index10 alt2"><code class="java keyword">public</code> <code class="java keyword">class</code> <code class="java plain">CopyFilesExample {</code>
<src class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">public</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">main(String[] args) </code><code class="java keyword">throws</code> <code class="java plain">InterruptedException,</code>
<pre><code></code></pre>
<src class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">IOException {</code>
<pre><code></code></pre>
<src class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">File source = </code><code class="java keyword">new</code> <code class="java plain">File(</code><code class="java string">"C:\\Users\\nikos7\\Desktop\\files\\sourcefile1.txt"</code><code class="java plain">);</code>
<pre><code></code></pre>
<src class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">File dest = </code><code class="java keyword">new</code> <code class="java plain">File(</code><code class="java string">"C:\\Users\\nikos7\\Desktop\\files\\destfile1.txt"</code><code class="java plain">);</code>
<pre><code></code></pre>
<src class="line number18 index17 alt1"><code class="java spaces">&nbsp;</code>&nbsp;
<pre><code></code></pre>
<src class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// copy file using FileStreams</code>
<pre><code></code></pre>
<src class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">long</code> <code class="java plain">start = System.nanoTime();</code>
<pre><code></code></pre>
<src class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">long</code> <code class="java plain">end;</code>
<pre><code></code></pre>
<src class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">copyFileUsingFileStreams(source, dest);</code>
<pre><code></code></pre>
<src class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"Time taken by FileStreams Copy = "</code>
<pre><code></code></pre>
<src class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ (System.nanoTime() - start));</code>
<src class="line number24 index23 alt1">&nbsp;
<src class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// copy files using java.nio.FileChannel</code>
<pre><code></code></pre>
<src class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">source = </code><code class="java keyword">new</code> <code class="java plain">File(</code><code class="java string">"C:\\Users\\nikos7\\Desktop\\files\\sourcefile2.txt"</code><code class="java plain">);</code>
<pre><code></code></pre>
<src class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">dest = </code><code class="java keyword">new</code> <code class="java plain">File(</code><code class="java string">"C:\\Users\\nikos7\\Desktop\\files\\destfile2.txt"</code><code class="java plain">);</code>
<pre><code></code></pre>
<src class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">start = System.nanoTime();</code>
<pre><code></code></pre>
<src class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">copyFileUsingFileChannels(source, dest);</code>
<pre><code></code></pre>
<src class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">end = System.nanoTime();</code>
<pre><code></code></pre>
<src class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"Time taken by FileChannels Copy = "</code> <code class="java plain">+ (end - start));</code>
<src class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// copy file using Java 7 Files class</code>
<pre><code></code></pre>
<src class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">source = </code><code class="java keyword">new</code> <code class="java plain">File(</code><code class="java string">"C:\\Users\\nikos7\\Desktop\\files\\sourcefile3.txt"</code><code class="java plain">);</code>
<pre><code></code></pre>
<src class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">dest = </code><code class="java keyword">new</code> <code class="java plain">File(</code><code class="java string">"C:\\Users\\nikos7\\Desktop\\files\\destfile3.txt"</code><code class="java plain">);</code>
<pre><code></code></pre>
<src class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">start = System.nanoTime();</code>
<pre><code></code></pre>
<src class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">copyFileUsingJava7Files(source, dest);</code>
<pre><code></code></pre>
<src class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">end = System.nanoTime();</code>
<pre><code></code></pre>
<src class="line number40 index39 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"Time taken by Java7 Files Copy = "</code> <code class="java plain">+ (end - start));</code>
<pre><code></code></pre>
<src class="line number42 index41 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java comments">// copy files using apache commons io</code>
<pre><code></code></pre>
<src class="line number43 index42 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">source = </code><code class="java keyword">new</code> <code class="java plain">File(</code><code class="java string">"C:\\Users\\nikos7\\Desktop\\files\\sourcefile4.txt"</code><code class="java plain">);</code>
<pre><code></code></pre>
<src class="line number44 index43 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">dest = </code><code class="java keyword">new</code> <code class="java plain">File(</code><code class="java string">"C:\\Users\\nikos7\\Desktop\\files\\destfile4.txt"</code><code class="java plain">);</code>
<pre><code></code></pre>
<src class="line number45 index44 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">start = System.nanoTime();</code>
<pre><code></code></pre>
<src class="line number46 index45 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">copyFileUsingApacheCommonsIO(source, dest);</code>
<pre><code></code></pre>
<src class="line number47 index46 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">end = System.nanoTime();</code>
<pre><code></code></pre>
<src class="line number48 index47 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">System.out.println(</code><code class="java string">"Time taken by Apache Commons IO Copy = "</code>
<pre><code></code></pre>
<src class="line number49 index48 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">+ (end - start));</code>
<src class="line number51 index50 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code>
<pre><code></code></pre>
<src class="line number53 index52 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">copyFileUsingFileStreams(File source, File dest)</code>
<pre><code></code></pre>
<src class="line number54 index53 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">throws</code> <code class="java plain">IOException {</code>
<pre><code></code></pre>
<src class="line number55 index54 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">InputStream input = </code><code class="java keyword">null</code><code class="java plain">;</code>
<pre><code></code></pre>
<src class="line number56 index55 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">OutputStream output = </code><code class="java keyword">null</code><code class="java plain">;</code>
<pre><code></code></pre>
<src class="line number57 index56 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code>
<pre><code></code></pre>
<src class="line number58 index57 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">input = </code><code class="java keyword">new</code> <code class="java plain">FileInputStream(source);</code>
<pre><code></code></pre>
<src class="line number59 index58 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">output = </code><code class="java keyword">new</code> <code class="java plain">FileOutputStream(dest);</code>
<pre><code></code></pre>
<src class="line number60 index59 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">byte</code><code class="java plain">[] buf = </code><code class="java keyword">new</code> <code class="java keyword">byte</code><code class="java plain">[</code><code class="java value">1024</code><code class="java plain">];</code>
<pre><code></code></pre>
<src class="line number61 index60 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">int</code> <code class="java plain">bytesRead;</code>
<pre><code></code></pre>
<src class="line number62 index61 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">while</code> <code class="java plain">((bytesRead = input.read(buf)) &gt; </code><code class="java value">0</code><code class="java plain">) {</code>
<pre><code></code></pre>
<src class="line number63 index62 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">output.write(buf, </code><code class="java value">0</code><code class="java plain">, bytesRead);</code>
<pre><code></code></pre>
<src class="line number64 index63 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code>
<pre><code></code></pre>
<src class="line number65 index64 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">finally</code> <code class="java plain">{</code>
<pre><code></code></pre>
<src class="line number66 index65 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">input.close();</code>
<pre><code></code></pre>
<src class="line number67 index66 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">output.close();</code>
<pre><code></code></pre>
<src class="line number68 index67 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code>
<pre><code></code></pre>
<src class="line number69 index68 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code>
<pre><code></code></pre>
<src class="line number71 index70 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">copyFileUsingFileChannels(File source, File dest)</code>
<pre><code></code></pre>
<src class="line number72 index71 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">throws</code> <code class="java plain">IOException {</code>
<pre><code></code></pre>
<src class="line number73 index72 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">FileChannel inputChannel = </code><code class="java keyword">null</code><code class="java plain">;</code>
<pre><code></code></pre>
<src class="line number74 index73 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">FileChannel outputChannel = </code><code class="java keyword">null</code><code class="java plain">;</code>
<pre><code></code></pre>
<src class="line number75 index74 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">try</code> <code class="java plain">{</code>
<pre><code></code></pre>
<src class="line number76 index75 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">inputChannel = </code><code class="java keyword">new</code> <code class="java plain">FileInputStream(source).getChannel();</code>
<pre><code></code></pre>
<src class="line number77 index76 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">outputChannel = </code><code class="java keyword">new</code> <code class="java plain">FileOutputStream(dest).getChannel();</code>
<pre><code></code></pre>
<src class="line number78 index77 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">outputChannel.transferFrom(inputChannel, </code><code class="java value">0</code><code class="java plain">, inputChannel.size());</code>
<pre><code></code></pre>
<src class="line number79 index78 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">} </code><code class="java keyword">finally</code> <code class="java plain">{</code>
<pre><code></code></pre>
<src class="line number80 index79 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">inputChannel.close();</code>
<pre><code></code></pre>
<src class="line number81 index80 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">outputChannel.close();</code>
<pre><code></code></pre>
<src class="line number82 index81 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">}</code>
<pre><code></code></pre>
<src class="line number83 index82 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code>
<pre><code></code></pre>
<src class="line number85 index84 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">copyFileUsingJava7Files(File source, File dest)</code>
<pre><code></code></pre>
<src class="line number86 index85 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">throws</code> <code class="java plain">IOException {</code>
<pre><code></code></pre>
<src class="line number87 index86 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">Files.copy(source.toPath(), dest.toPath());</code>
<pre><code></code></pre>
<src class="line number88 index87 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code>
<pre><code></code></pre>
<src class="line number90 index89 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java keyword">private</code> <code class="java keyword">static</code> <code class="java keyword">void</code> <code class="java plain">copyFileUsingApacheCommonsIO(File source, File dest)</code>
<pre><code></code></pre>
<src class="line number91 index90 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java keyword">throws</code> <code class="java plain">IOException {</code>
<pre><code></code></pre>
<src class="line number92 index91 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">FileUtils.copyFile(source, dest);</code>
<pre><code></code></pre>
<src class="line number93 index92 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">}</code>
<src class="line number95 index94 alt2"><code class="java plain">}</code>
<pre><code></code></pre>
<p>输出：</p>
<src class="line number1 index0 alt2"><code class="java plain">Time taken by FileStreams Copy = </code><code class="java value">127572360</code>
<pre><code></code></pre>
<src class="line number2 index1 alt1"><code class="java plain">Time taken by FileChannels Copy = </code><code class="java value">10449963</code>
<pre><code></code></pre>
<src class="line number3 index2 alt2"><code class="java plain">Time taken by Java7 Files Copy = </code><code class="java value">10808333</code>
<pre><code></code></pre>
<src class="line number4 index3 alt1"><code class="java plain">Time taken by Apache Commons IO Copy = </code><code class="java value">17971677</code>
<pre><code><span style="font-size: 14px;"><code class="java  language-java"><span class="token keyword"><span class="token keyword"><span class="token keyword"><span class="token function"><span class="token punctuation"><span class="token class-name"><span class="token punctuation"><span class="token class-name"><span class="token keyword"><span class="token punctuation"><span class="token punctuation"><span class="token class-name"><span class="token operator"><span class="token keyword"><span class="token punctuation"><span class="token class-name"><span class="token operator"><span class="token keyword"><span class="token punctuation"><span class="token keyword"><span class="token punctuation"><span class="token operator"><span class="token keyword"><span class="token class-name"><span class="token punctuation"><span class="token keyword"><span class="token class-name"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token operator"><span class="token keyword"><span class="token class-name"><span class="token punctuation"><span class="token keyword"><span class="token class-name"><span class="token punctuation"><span class="token keyword"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token punctuation"><span class="token number"><span class="token punctuation"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token keyword"><span class="token punctuation"><span class="token class-name"><span class="token punctuation"><span class="token punctuation"><span class="token class-name"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token operator"><span class="token string"><span class="token punctuation"><span class="token string"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token keyword"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token operator"><span class="token string"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token function"><span class="token punctuation"><span class="token operator"><span class="token string"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><span class="token punctuation"><strong>&nbsp;</strong></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></code></span></code></pre>
<p>&nbsp;</p>

</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>